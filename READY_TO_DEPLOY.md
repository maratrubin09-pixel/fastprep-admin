# ‚úÖ FastPrep Admin: –ì–û–¢–û–í –ö –î–ï–ü–õ–û–Æ

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**GitHub:** https://github.com/maratrubin09-pixel/fastprep-admin
**–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:** "Add quick Render deploy steps guide"

### –ß—Ç–æ –≥–æ—Ç–æ–≤–æ ‚úÖ
- ‚úÖ **Backend (NestJS):** API + Worker + AuthZ + RT + S3 + Outbox
- ‚úÖ **render.yaml:** Blueprint –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ú–∏–≥—Ä–∞—Ü–∏—è `001_initial_schema.sql`
- ‚úÖ **Frontend placeholder:** –°—Ç–∞—Ç–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "Coming Soon"
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** DEPLOYMENT_GUIDE.md + RENDER_DEPLOY_STEPS.md
- ‚úÖ **SELF-CHECK:** –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

---

## üöÄ –ß–¢–û –¢–ï–ë–ï –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ (10-15 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å Render Dashboard
üëâ **https://dashboard.render.com/**

–ï—Å–ª–∏ –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞:
1. Sign Up —á–µ—Ä–µ–∑ GitHub (–±—ã—Å—Ç—Ä–µ–µ)
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email

---

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å Blueprint

1. –í Render Dashboard –Ω–∞–∂–∞—Ç—å **"New"** (–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª)
2. –í—ã–±—Ä–∞—Ç—å **"Blueprint"**
3. **Connect repository:**
   - –ï—Å–ª–∏ GitHub –µ—â—ë –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω ‚Üí **"Connect GitHub"** ‚Üí –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å Render
   - –í—ã–±—Ä–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: **`maratrubin09-pixel/fastprep-admin`**
4. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç `render.yaml` –≤ –∫–æ—Ä–Ω–µ
5. –ù–∞–∂–∞—Ç—å **"Apply"**

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
- Render —Å–æ–∑–¥–∞—Å—Ç 5 —Å–µ—Ä–≤–∏—Å–æ–≤:
  1. `fastprep-postgres` (PostgreSQL database)
  2. `fastprep-redis` (Redis)
  3. `fastprep-admin-api` (Backend web service)
  4. `fastprep-admin-worker` (Background worker)
  5. `fastprep-admin-frontend` (Static site)

**–í—Ä–µ–º—è:** ~5-7 –º–∏–Ω—É—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

### –®–∞–≥ 3: –î–æ–∂–¥–∞—Ç—å—Å—è –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "Apply" –ø–æ—è–≤–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏:
- üü° **Building** ‚Üí –∏–¥—ë—Ç —Å–±–æ—Ä–∫–∞
- üü¢ **Live** ‚Üí —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
- üî¥ **Failed** ‚Üí –æ—à–∏–±–∫–∞ (—Å–º. –ª–æ–≥–∏)

**–ü–æ–¥–æ–∂–¥–∏, –ø–æ–∫–∞ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å—Ç–∞–Ω—É—Ç üü¢ Live** (–∫—Ä–æ–º–µ worker, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ "Running")

**–í–∞–∂–Ω–æ:** API –∏ Worker –º–æ–≥—É—Ç —É–ø–∞—Å—Ç—å —Å –æ—à–∏–±–∫–æ–π `S3_ENDPOINT is not defined` ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –º—ã —Å–µ–π—á–∞—Å –¥–æ–±–∞–≤–∏–º env vars.

---

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Environment Variables

#### 4.1 –î–ª—è `fastprep-admin-api`
1. –í —Å–ø–∏—Å–∫–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞–∂–∞—Ç—å –Ω–∞ **`fastprep-admin-api`**
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Environment"**
3. –ù–∞–∂–∞—Ç—å **"Add Environment Variable"**
4. –î–æ–±–∞–≤–∏—Ç—å –ø–æ –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ (–±–µ–∑ –Ω–∏—Ö API –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è):**
```
S3_ENDPOINT = https://stub-endpoint.com
S3_BUCKET = fastprep-attachments
S3_ACCESS_KEY_ID = stub_key
S3_SECRET_ACCESS_KEY = stub_secret
TG_ADAPTER_TOKEN = temporary_stub_token_12345
```

üí° **–≠—Ç–æ stub-–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.** –ü–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏–º –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ R2 credentials.

5. –ù–∞–∂–∞—Ç—å **"Save Changes"**
6. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å (~2-3 –º–∏–Ω—É—Ç—ã)

#### 4.2 –î–ª—è `fastprep-admin-worker`
1. –ù–∞–∂–∞—Ç—å –Ω–∞ **`fastprep-admin-worker`**
2. **Environment** ‚Üí **"Add Environment Variable"**
3. –î–æ–±–∞–≤–∏—Ç—å:
```
TG_ADAPTER_TOKEN = temporary_stub_token_12345
```
4. **Save Changes**

---

### –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Render Shell (–ø—Ä–æ—â–µ)
1. –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Üí –Ω–∞–∂–∞—Ç—å –Ω–∞ **`fastprep-admin-api`**
2. –í–∫–ª–∞–¥–∫–∞ **"Shell"** (—Å–ø—Ä–∞–≤–∞ –æ—Ç "Logs")
3. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (~10 —Å–µ–∫)
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—Å—Ç–∞–≤–∏—Ç—å —ç—Ç—É –∫–æ–º–∞–Ω–¥—É:

```bash
cat migrations/001_initial_schema.sql | psql $DATABASE_URL
```

5. –ù–∞–∂–∞—Ç—å Enter
6. –ï—Å–ª–∏ –≤—Å—ë –û–ö, —É–≤–∏–¥–∏—à—å:
```
CREATE TABLE
CREATE TABLE
...
INSERT 0 1
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
–í —Ç–æ–º –∂–µ Shell –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
```bash
psql $DATABASE_URL -c "SELECT name FROM roles;"
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
```
  name   
---------
 Admin
 Manager
 Agent
(3 rows)
```

‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—à—å 3 —Ä–æ–ª–∏ ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!

---

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API

#### –ü–æ–ª—É—á–∏—Ç—å URL —Å–µ—Ä–≤–∏—Å–∞
1. –í —Å–ø–∏—Å–∫–µ —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Üí **`fastprep-admin-api`**
2. –í–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://fastprep-admin-api-abcd1234.onrender.com`)

#### –¢–µ—Å—Ç 1: Health Check
–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ —á–µ—Ä–µ–∑ curl:
```
https://–í–ê–®-API-URL.onrender.com/api/health
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
```json
{"ok":true,"timestamp":"2025-10-22T..."}
```

#### –¢–µ—Å—Ç 2: API Info
```
https://–í–ê–®-API-URL.onrender.com/api
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
```json
{
  "name": "FastPrep Admin API",
  "version": "0.1.0",
  "status": "running",
  ...
}
```

‚úÖ –ï—Å–ª–∏ –æ–±–∞ —Ç–µ—Å—Ç–∞ –ø—Ä–æ—à–ª–∏ ‚Äî **API —Ä–∞–±–æ—Ç–∞–µ—Ç!**

---

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ Frontend

1. –í —Å–ø–∏—Å–∫–µ —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Üí **`fastprep-admin-frontend`**
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://fastprep-admin-frontend-xyz.onrender.com`)
3. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
–ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å:
- üöÄ **FastPrep Admin**
- **Admin Panel Coming Soon**
- ‚úÖ **Backend API Active**

---

## üéâ –ì–û–¢–û–í–û! –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. ‚úÖ **PostgreSQL** (—Å —Ä–æ–ª—è–º–∏ Admin/Manager/Agent)
2. ‚úÖ **Redis** (–¥–ª—è AuthZ –∫—ç—à–∞ –∏ RT)
3. ‚úÖ **Backend API** (`/api`, `/api/health`)
4. ‚úÖ **Worker** (–∂–¥—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ outbox)
5. ‚úÖ **Frontend placeholder** (—Å—Ç–∞—Ç–∏–∫–∞)

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)

### 1. –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ R2 credentials (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
**–ó–∞—á–µ–º:** –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–ª–æ–∂–µ–Ω–∏–π –≤ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ö–∞–∫:**
1. Cloudflare Dashboard ‚Üí R2 Object Storage
2. Create Bucket ‚Üí `fastprep-attachments`
3. R2 ‚Üí Manage R2 API Tokens ‚Üí Create API Token
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:
   - Access Key ID
   - Secret Access Key
   - Endpoint URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.r2.cloudflarestorage.com`)
5. –û–±–Ω–æ–≤–∏—Ç—å env vars –≤ `fastprep-admin-api`:
   ```
   S3_ENDPOINT = —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_endpoint
   S3_ACCESS_KEY_ID = —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_key
   S3_SECRET_ACCESS_KEY = —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_secret
   ```

### 2. –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Frontend (React+TS+MUI)
**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** Placeholder (—Å—Ç–∞—Ç–∏–∫–∞)
**–ù—É–∂–Ω–æ:** –°–æ–∑–¥–∞—Ç—å React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å:
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞ (`/login`)
- Dashboard (`/dashboard`)
- Messengers (`/messengers`)
- Settings (`/settings`)

**ETA:** ~2-3 —á–∞—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 3. JWT Auth Middleware
**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –æ–∂–∏–¥–∞—é—Ç `req.user.id`, –Ω–æ middleware –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
**–ù—É–∂–Ω–æ:** –î–æ–±–∞–≤–∏—Ç—å Passport.js + JWT strategy

**ETA:** ~30 –º–∏–Ω—É—Ç

### 4. TG Adapter (Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –û—Ç–∫–ª—é—á–µ–Ω –≤ render.yaml (–∫–æ–¥ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
**–ù—É–∂–Ω–æ:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π NestJS —Å–µ—Ä–≤–∏—Å —Å TDLib

**ETA:** ~3-4 —á–∞—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üìä –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ Render

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- PostgreSQL Starter: $7/–º–µ—Å
- Redis Starter: $7/–º–µ—Å
- API (Web Service Starter): $7/–º–µ—Å
- Worker (Worker Starter): $7/–º–µ—Å
- Frontend (Static Site): **$0** (Free tier)

**–ò—Ç–æ–≥–æ:** ~$28/–º–µ—Å

**Free tier –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤):**
- PostgreSQL Free (–¥–æ 1GB): $0
- Redis Free (–¥–æ 25MB): $0
- API Free: $0 (–Ω–æ –∑–∞—Å—ã–ø–∞–µ—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω –ø—Ä–æ—Å—Ç–æ—è)
- Worker Free: $0 (–Ω–æ –∑–∞—Å—ã–ø–∞–µ—Ç)
- Frontend Free: $0

**–ò—Ç–æ–≥–æ Free:** $0/–º–µ—Å (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏)

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (—Å—Ç–∞—Ç—É—Å "Failed")
1. –ù–∞–∂–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–∏—Å ‚Üí **"Logs"**
2. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É —Å –æ—à–∏–±–∫–æ–π (–æ–±—ã—á–Ω–æ –∫—Ä–∞—Å–Ω–∞—è)
3. –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
   - `DATABASE_URL is not defined` ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Postgres –∑–∞–ø—É—â–µ–Ω
   - `S3_ENDPOINT is not defined` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å env vars (—Å–º. –®–∞–≥ 4)

### –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `DATABASE_URL` –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Shell:
   ```bash
   echo $DATABASE_URL
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è: `postgresql://...`
2. –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Shell

### Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 404
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ **build** —Å–µ—Ä–≤–∏—Å–∞ frontend
2. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `cp -r public/* build/`
3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `rootDir: ./frontend` –≤ render.yaml

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ:
1. –°–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (Dashboard)
2. –õ–æ–≥–∏ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫)
3. –ß—Ç–æ –ø—ã—Ç–∞–ª—Å—è —Å–¥–µ–ª–∞—Ç—å –∏ —á—Ç–æ —É–≤–∏–¥–µ–ª

---

**–£–¥–∞—á–∏! üöÄ** –í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–π–º—ë—Ç ~10-15 –º–∏–Ω—É—Ç.





